-- CLOSETOU 계정 생성 (SYSTEM 계정에서 작업하세요.)
CREATE USER CLOSETOU IDENTIFIED BY CLOSETOU;
GRANT RESOURCE, CONNECT TO CLOSETOU;


-- MEMBER 테이블 생성 및 코멘트, 시퀀스 작성 (CLOSETOU 계정에서 작업하세요.)
CREATE TABLE MEMBER (
    NO NUMBER PRIMARY KEY,
    USER_ID VARCHAR2(30) NOT NULL UNIQUE,
    PASSWORD VARCHAR2(30) NOT NULL,
    ROLE VARCHAR2(10) DEFAULT 'ROLE_USER',
    USER_NAME VARCHAR2(20) NOT NULL,
    NICKNAME VARCHAR2(30) NOT NULL,
    PHONE VARCHAR2(13),
    ADD_PHONE VARCHAR2(13),
    EMAIL VARCHAR2(100),
    ADDRESS VARCHAR2(50),
    STATUS VARCHAR2(1) DEFAULT 'Y' CHECK(STATUS IN('Y', 'N')),
    ENROLL_DATE DATE DEFAULT SYSDATE
);

COMMENT ON COLUMN MEMBER.NO IS '회원번호';
COMMENT ON COLUMN MEMBER.USER_ID IS '회원아이디';
COMMENT ON COLUMN MEMBER.PASSWORD IS '회원비밀번호';
COMMENT ON COLUMN MEMBER.ROLE IS '회원타입';
COMMENT ON COLUMN MEMBER.USER_NAME IS '회원명';
COMMENT ON COLUMN MEMBER.NICKNAME IS '닉네임';
COMMENT ON COLUMN MEMBER.PHONE IS '연락처';
COMMENT ON COLUMN MEMBER.ADD_PHONE IS '추가연락처';
COMMENT ON COLUMN MEMBER.EMAIL IS '이메일';
COMMENT ON COLUMN MEMBER.ADDRESS IS '주소';
COMMENT ON COLUMN MEMBER.STATUS IS '상태값(Y/N)';
COMMENT ON COLUMN MEMBER.ENROLL_DATE IS '회원가입일';

CREATE SEQUENCE SEQ_UNO;


-- 테스트용 관리자 계정 생성 (CLOSETOU 계정에서 작업하세요.)
INSERT INTO MEMBER (
    NO, 
    USER_ID, 
    PASSWORD,
    ROLE,
    USER_NAME,
    NICKNAME, 
    PHONE,
    ADD_PHONE,
    EMAIL, 
    ADDRESS, 
    STATUS, 
    ENROLL_DATE
) VALUES(
    SEQ_UNO.NEXTVAL, 
    'test', 
    '1234', 
    'ROLE_ADMIN',
    '관리자',
    '관리자',
    '010-1234-5678',
    NULL,
    'admin@iei.or.kr', 
    '서울시 강남구 역삼동',
    DEFAULT,
    DEFAULT
);

COMMIT;

-- 테스트용 회원 계정 생성 (CLOSETOU 계정에서 작업하세요.)
INSERT INTO MEMBER (
    NO, 
    USER_ID, 
    PASSWORD,
    ROLE,
    USER_NAME,
    NICKNAME, 
    PHONE,
    ADD_PHONE,
    EMAIL, 
    ADDRESS, 
    STATUS, 
    ENROLL_DATE
) VALUES(
    SEQ_UNO.NEXTVAL, 
    'user', 
    '1234', 
    DEFAULT,
    '일반회원',
    '일반회원',
    '010-2345-6789',
    NULL,
    'user@iei.or.kr', 
    '서울시 강남구 역삼동',
    DEFAULT,
    DEFAULT
);

COMMIT;
