----------- 테스트용 ARTICLE 테이블, COMMENT 테이블 쿼리문 -----------

----------- ARTICLE 테이블 생성 및 코멘트, 시퀀스 작성(CLOSETOU 계정에서 작업하세요.) -----------
DROP TABLE ARTICLE;
DROP TABLE REPLY;


CREATE TABLE ARTICLE (	
    NO NUMBER NOT NULL, -- 게시물번호
--    PHOTO_NO NUMBER, -- 사진 번호                                     -- IMAGE 테이블 생성 후 주석 풀기
    USER_NO NUMBER NOT NULL,  -- 회원번호
    TYPE VARCHAR2(10) NOT NULL, -- 게시판 종류(공지, 문의, 거래, 자유)
    TITLE VARCHAR2(100) NOT NULL, -- 게시물제목
    CONTENT VARCHAR2(2000) NOT NULL,-- 게시물 내용
    READCOUNT NUMBER DEFAULT 0 NOT NULL, -- 조회수
    VISABLE CHAR(1) DEFAULT 'N' NOT NULL, -- 비공개처리여부
    POST_DATE DATE DEFAULT SYSDATE NOT NULL,-- 최초등록일자
    EDITED VARCHAR2(500), -- 수정내역
    EDIT_DATE DATE,-- 최종 수정일자
    
    CONSTRAINT ARTICLE_NO_PK PRIMARY KEY(NO),
    CONSTRAINT ARTICLE_USER_NO_FK FOREIGN KEY(USER_NO) REFERENCES MEMBER(NO),
    CONSTRAINT ARTICLE_VISABLE_CK CHECK(VISABLE IN('Y', 'N'))
--    CONSTRAINT ARTICLE_PHOTO_NO_FK FOREIGN KEY(PHOTO_NO) REFERENCES IMAGE(NO)
);    


COMMENT ON COLUMN ARTICLE.NO IS '게시물번호';
--COMMENT ON COLUMN ARTICLE.PHOTO_NO IS '사진번호';
COMMENT ON COLUMN ARTICLE.USER_NO IS '작성자회원번호';
COMMENT ON COLUMN ARTICLE.TYPE IS '게시판종류(공지, 문의, 거래, 자유)';
COMMENT ON COLUMN ARTICLE.TITLE IS '게시물제목';
COMMENT ON COLUMN ARTICLE.CONTENT IS '게시물내용';
COMMENT ON COLUMN ARTICLE.READCOUNT IS '조회수';
COMMENT ON COLUMN ARTICLE.VISABLE IS '비공개처리여부(Y/N)';
COMMENT ON COLUMN ARTICLE.POST_DATE IS '최초등록일자';
COMMENT ON COLUMN ARTICLE.EDITED IS '수정내역';
COMMENT ON COLUMN ARTICLE.EDIT_DATE IS '최종수정일자';

CREATE SEQUENCE SEQ_ARTICLE_NO;




----------- 테스트용 ARTICLE 테이블의 게시물 생성(CLOSETOU 계정에서 작업하세요.) -----------
INSERT INTO ARTICLE (
    NO, 
    USER_NO,
    TYPE,
    TITLE,
    CONTENT
) VALUES(
    SEQ_ARTICLE_NO.NEXTVAL,
    21,                             -- 테스트 전 수정!!!!
    '자유', 
    '집에가고싶어',
    '치킨먹고싶어'
);

INSERT INTO ARTICLE (
    NO, 
    USER_NO,
    TYPE,
    TITLE,
    CONTENT,
    EDITED
) VALUES(
    SEQ_ARTICLE_NO.NEXTVAL,
    21,                             -- 테스트 전 수정!!!!
    '공지', 
    '거래 관련 공지사항입니다.',
    '거래 제대로 하거라 똑바로 하거라',
    '거래를 제대로 합시다. 똑바로 하시길 바랍니다.'
);



COMMIT;




----------- REPLY 테이블 생성 및 코멘트, 시퀀스 작성(CLOSETOU 계정에서 작업하세요.) -----------
CREATE TABLE REPLY (
	NO NUMBER NOT NULL,
	ARTICLE_NO NUMBER NOT NULL,
	ID_NO NUMBER NOT NULL,
	CONTENT	VARCHAR2(500) NOT NULL,
	VISABLE	CHAR(1)	DEFAULT 'N' NOT NULL,
	SECRET CHAR(1) NOT NULL,
	COMMENT_DATE DATE DEFAULT SYSDATE NOT NULL,
	EDITED VARCHAR2(500),
	EDIT_DATE DATE,
    
    CONSTRAINT REPLY_NO_PK PRIMARY KEY(NO),
    CONSTRAINT REPLY_ARTICLE_NO_FK FOREIGN KEY(ARTICLE_NO) REFERENCES ARTICLE(NO),
    CONSTRAINT REPLY_ID_NO_FK FOREIGN KEY(ID_NO) REFERENCES MEMBER(NO),
    CONSTRAINT REPLY_VISABLE_CK CHECK(VISABLE IN('Y', 'N')),
    CONSTRAINT REPLY_SECRET_CK CHECK(SECRET IN('Y', 'N'))
);


COMMENT ON COLUMN REPLY.NO IS '댓글번호';
COMMENT ON COLUMN REPLY.ARTICLE_NO IS '게시물번호';
COMMENT ON COLUMN REPLY.ID_NO IS '댓글작성자번호';
COMMENT ON COLUMN REPLY.CONTENT IS '댓글내용';
COMMENT ON COLUMN REPLY.VISABLE IS '비공개처리여부(Y/N)';
COMMENT ON COLUMN REPLY.SECRET IS '비밀댓글여부(Y/N)';
COMMENT ON COLUMN REPLY.COMMENT_DATE IS '댓글등록일자';
COMMENT ON COLUMN REPLY.EDITED IS '수정내역';
COMMENT ON COLUMN REPLY.EDIT_DATE IS '최종수정일자';

CREATE SEQUENCE SEQ_REPLY_NO;




----------- 테스트용 REPLY 테이블의 게시물 생성(CLOSETOU 계정에서 작업하세요.) -----------
INSERT INTO REPLY (
    NO, 
    ARTICLE_NO,
    ID_NO,
    CONTENT,
    SECRET
) VALUES(
    SEQ_REPLY_NO.NEXTVAL,
    1,                             -- 테스트 전 수정!!!!
    21,                             -- 테스트 전 수정!!!!
    '즐거운세미프로젝트',
    'N'
);

INSERT INTO REPLY (
    NO, 
    ARTICLE_NO,
    ID_NO,
    CONTENT,
    SECRET,
    EDITED,
    EDIT_DATE
) VALUES(
    SEQ_REPLY_NO.NEXTVAL,
    1,                             -- 테스트 전 수정!!!!
    21,                             -- 테스트 전 수정!!!!
    '안녕안녕',
    'N',
    '안녕안녕안녕안녀어어어어어엉!!!!',
    SYSDATE
);

COMMIT;

